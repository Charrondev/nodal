"use strict";
const api_1 = require('./api');
const fxn = require('fxn');
class Application extends fxn.Application {
    constructor() {
        super('Nodal');
    }
    /**
     * HTTP Error
     */
    error(req, res, start, status, message, err) {
        status = status || 500;
        message = message || 'Internal Server Error';
        const headers = { 'Content-Type': 'application/json' };
        err && console.log(err.stack);
        this.send(req, res, start, status, headers, JSON.stringify(api_1.default.error(message, (process.env.NODE_ENV !== 'production' && err) ?
            err.stack.split('\n') : null), null, 2), message);
    }
}
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = Application;

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcGxpY2F0aW9uLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQkFBZ0IsT0FBTyxDQUFDLENBQUE7QUFDeEIsTUFBWSxHQUFHLFdBQU0sS0FBSyxDQUFDLENBQUE7QUFFM0IsMEJBQTBCLEdBQUcsQ0FBQyxXQUFXO0lBRXZDO1FBRUUsTUFBTSxPQUFPLENBQUMsQ0FBQztJQUVqQixDQUFDO0lBRUQ7O09BRUc7SUFDSSxLQUFLLENBQUMsR0FBUSxFQUFFLEdBQVEsRUFBRSxLQUFVLEVBQUUsTUFBYyxFQUFFLE9BQWUsRUFBRSxHQUFRO1FBRXBGLE1BQU0sR0FBRyxNQUFNLElBQUksR0FBRyxDQUFDO1FBQ3ZCLE9BQU8sR0FBRyxPQUFPLElBQUksdUJBQXVCLENBQUM7UUFFN0MsTUFBTSxPQUFPLEdBQUcsRUFBQyxjQUFjLEVBQUUsa0JBQWtCLEVBQUMsQ0FBQztRQUVyRCxHQUFHLElBQUksT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFOUIsSUFBSSxDQUFDLElBQUksQ0FDUCxHQUFHLEVBQ0gsR0FBRyxFQUNILEtBQUssRUFDTCxNQUFNLEVBQ04sT0FBTyxFQUNQLElBQUksQ0FBQyxTQUFTLENBQ1osYUFBRyxDQUFDLEtBQUssQ0FDUCxPQUFPLEVBQ1AsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsS0FBSyxZQUFZLElBQUksR0FBRyxDQUFDO1lBQzVDLEdBQUcsQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUksQ0FDL0IsRUFDRCxJQUFJLEVBQ0osQ0FBQyxDQUNGLEVBQ0QsT0FBTyxDQUNSLENBQUM7SUFFSixDQUFDO0FBRUgsQ0FBQztBQUVEO2tCQUFlLFdBQVcsQ0FBQyIsImZpbGUiOiJhcHBsaWNhdGlvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBBUEkgZnJvbSAnLi9hcGknO1xuaW1wb3J0ICogYXMgZnhuIGZyb20gJ2Z4bic7XG5cbmNsYXNzIEFwcGxpY2F0aW9uIGV4dGVuZHMgZnhuLkFwcGxpY2F0aW9uIHtcblxuICBjb25zdHJ1Y3RvcigpIHtcblxuICAgIHN1cGVyKCdOb2RhbCcpO1xuXG4gIH1cblxuICAvKipcbiAgICogSFRUUCBFcnJvclxuICAgKi9cbiAgcHVibGljIGVycm9yKHJlcTogYW55LCByZXM6IGFueSwgc3RhcnQ6IGFueSwgc3RhdHVzOiBudW1iZXIsIG1lc3NhZ2U6IHN0cmluZywgZXJyOiBhbnkpIHtcblxuICAgIHN0YXR1cyA9IHN0YXR1cyB8fCA1MDA7XG4gICAgbWVzc2FnZSA9IG1lc3NhZ2UgfHwgJ0ludGVybmFsIFNlcnZlciBFcnJvcic7XG5cbiAgICBjb25zdCBoZWFkZXJzID0geydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9O1xuXG4gICAgZXJyICYmIGNvbnNvbGUubG9nKGVyci5zdGFjayk7XG5cbiAgICB0aGlzLnNlbmQoXG4gICAgICByZXEsXG4gICAgICByZXMsXG4gICAgICBzdGFydCxcbiAgICAgIHN0YXR1cyxcbiAgICAgIGhlYWRlcnMsXG4gICAgICBKU09OLnN0cmluZ2lmeShcbiAgICAgICAgQVBJLmVycm9yKFxuICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZXJyKSA/XG4gICAgICAgICAgICBlcnIuc3RhY2suc3BsaXQoJ1xcbicpIDogbnVsbFxuICAgICAgICApLFxuICAgICAgICBudWxsLFxuICAgICAgICAyXG4gICAgICApLFxuICAgICAgbWVzc2FnZVxuICAgICk7XG5cbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcGxpY2F0aW9uO1xuIl19
